Success Criteria (SC) Rein subjektiv, aus meinem Denken ergibt sich, aber messbar formuliert:  SC-1: Mindestens 3 Persönlichkeitstests sind als psyche_quiz_completed-Signalquelle angebunden.  SC-2: In einem internen Testlauf (≥ 10 Nutzer:innen) ist nach 3–5 Tests eine sichtbare Veränderung von Avatar & Archetypen-Mix erkennbar.  SC-3: Kein einzelner kurzer Fun-Test kann den dominanten Archetyp um > 50 Prozentpunkte verschieben.  SC-4: ≥ 80 % der Testpersonen verstehen nach kurzem Onboarding, dass:  Tests auf ein Langzeit-Profil einzahlen,  Avatar / Archetypen die „Verdichtung“ vieler Tests sind.  Implementierungsplan für AI-Agent A) Kontext Faktisch korrekt sage ich:  Title: Dynamisches Persönlichkeitsprofil & Avatar (LME/DUBA-Integration)  Kurzfassung: Virale Persönlichkeitstests werden zu Signals für eine LME-basierte Psyche-Engine. Jeder Test erzeugt Marker (DUBA-Event), LME aggregiert sie zum user_state_v1.psyche, der einen Archetypen-Mix und einen SRR-Avatar steuert. Die Quiz-Welt bleibt statisch-erlebbar, aber das Ergebnis wird akkumuliert und lebendig.  B) Technischer Rahmen Faktisch korrekt sage ich:  Core-Komponenten  DUBA-Stream / Event-Layer (bestehend, wird um psychespezifische Events erweitert).  LME-Core mit Update-Regeln (Signals → Marker → State).  Quiz-Vertical mit Config-basierten Tests.  Profil-/Avatar-Service.  Hauptdatenstrukturen  user_state_v1.psyche (State + Archetypen + Deck).  DUBA-Event psyche_quiz_completed.  archetypes.json (Prototyp-Vektoren).  SRR-Mapping-Funktionen für Avatar.  C) Work Plan (Phasen & Tasks) Phase 1 – Psyche-Pack & State-Modell T1.1 – Psyche-Pack definieren & spezifizieren  Description: Definiere 3–5 Dimensionsnamen, Bedeutung, Trait/State-Charakter und Aggregationsparameter (base_alpha_dim, Rolle in Avatar/SRR).  Artifacts:  docs/psyche-pack.md  Konfigurationsdatei psyche_dimensions.json.  DoD:  Dimensionen sind benannt, verständlich beschrieben.  Pro Dimension: textliche Definition + Vorschlagswerte für base_alpha_dim.  Coverage: FR-1, SC-1  T1.2 – user_state_v1.psyche Datenmodell  Description: Konkretes JSON/Schema für user_state_v1.psyche definieren (wie im Beispiel-JSON).  Artifacts:  user_state_v1.psyche.schema.json  Typdefinitionen in der Codebasis.  DoD:  Schema validiert.  Beispielinstanz (Default-State) vorhanden.  Coverage: FR-1, NFR-4  Phase 2 – DUBA & Quiz-Mapping T2.1 – DUBA-Event-Typ psyche_quiz_completed definieren  Description: Neuen Event-Typ spezifizieren und im DUBA-System registrieren:  Felder: user_id, quiz_id, marker_scores, test_meta, ttl_hours.  Artifacts:  DUBA-Schema/Definition für psyche_quiz_completed.  DoD:  Event lässt sich im Dev-System erzeugen und validieren.  Coverage: FR-2, NFR-3  T2.2 – Erweiterung quiz.schema.json um Psyche-Felder  Description: Quiz-Schema um meta.defaultReliabilityWeight, psyche-Block und answers[].markers erweitern (gemäß der vorliegenden JSON-Spec).  Artifacts:  quiz.schema.json v1.psyche.  DoD:  Mindestens 1 Test-Config validiert erfolgreich mit Psyche-Markern.  Coverage: FR-3, FR-8, NFR-4  T2.3 – Quiz-Service: Items → Marker → quiz_delta  Description: Implementiere im Quiz-Service:  Sammlung von markers pro gegebener Antwort,  Aggregation zu marker_scores (z. B. Mittelwert pro Dimension),  Berechnung von quiz_delta.  Artifacts:  aggregateMarkers()-Funktion,  Unit-Tests mit Beispiel-Quiz.  DoD:  Für definierte Antwortsets entstehen erwartete marker_scores und quiz_delta.  Coverage: FR-3  T2.4 – POST /api/quiz/complete: DUBA-Event schreiben  Description: Beim Abschluss:  aggregateMarkers aufrufen,  reliability_weight und completion_quality bestimmen,  psyche_quiz_completed-Event in DUBA schreiben,  gleichzeitig Fun-Result für UI zurückgeben.  Artifacts:  API-Handler-Implementierung,  Logging/Tracing.  DoD:  Abschluss eines Tests erzeugt im Dev-System ein korrektes DUBA-Event.  Coverage: FR-2, FR-3, FR-9  Phase 3 – LME-Core: Aggregation & State-Update T3.1 – Aggregationsfunktion implementieren  Description: Implementiere pro Dimension:  effective_alpha_d = base_alpha_dim * reliability_weight * quality_factor new_value_d       = old_value_d + effective_alpha_d * (marker_score_d - old_value_d) new_momentum_d    = 0.7 * old_momentum_d + 0.3 * (new_value_d - old_value_d) new_baseline_d    = 0.99 * old_baseline_d + 0.01 * new_value_d inkl. Clamps auf erlaubte Bereiche.  Artifacts:  Modul update_psyche_state(events_batch, prev_state).  DoD:  Unit-Tests für typische Szenarien:  Deep-Test vs. Fun-Test,  mehrfacher Test mit gleicher Tendenz (Momentum steigt).  Coverage: FR-4, NFR-2  T3.2 – LME-Listener für psyche_quiz_completed  Description: LME-Core lauscht auf DUBA-Events:  lädt aktuellen user_state_v1.psyche,  ruft Aggregationsfunktion auf,  speichert neuen State + Historie (für Timeline).  Artifacts:  Listener-/Worker-Service.  DoD:  Manuelles Testevent führt zu aktualisiertem State in Storage.  Coverage: FR-1, FR-2, FR-4  Phase 4 – Archetypen-Mix & Deck T4.1 – Archetypen-Definition & Prototyp-Vektoren  Description: Konfig-Datei mit Archetypen:  proto_vector pro Archetyp,  Copy-Texte (short/long).  Artifacts:  archetypes.json,  docs/archetypes.md.  DoD:  Mindestens 5 Archetypen definiert (z. B. Nebel, Nekromant, Dichter etc.),  Prototyp-Vektoren abgestimmt.  Coverage: FR-5  T4.2 – State → Archetypen-Mix Berechnung  Description: Implementiere Softmax-basiertes Mapping:  Distanz zwischen state und proto_vector,  weight_i ~ exp(-||state - proto_i||^2 / tau),  Normalisierung, Top-3 für UI, vollständige Liste für Deck-XP.  Artifacts:  Modul compute_archetype_mix(state, archetypes).  DoD:  Unit-Tests mit synthetischen States,  Gewichtung verhält sich erwartungskonform (näherer Prototyp → höheres Gewicht).  Coverage: FR-5  T4.3 – Archetypen-Deck (XP-Logik)  Description: Deck-Struktur:  pro Archetyp xp-Wert,  Update-Regel xp += weight_i * xp_gain. Speichern im user_state_v1.psyche.  Artifacts:  update_archetype_deck(mix, prev_deck).  DoD:  Mehrere Events mit hohem Gewicht für denselben Archetyp erhöhen dessen XP sichtbar.  Coverage: FR-5, SC-2  Phase 5 – Avatar (SRR) & Profil-API T5.1 – SRR-Mapping State → Avatar-Parameter  Description: Implementiere einfache Mapping-Funktionen, z. B.:  color_warmth = 0.5 + 0.4 * (connection.value - 0.5),  shape_complexity = 0.3 + 0.7 * shadow.value,  ... sowie seed für emergente Variation.  Artifacts:  map_psyche_to_avatar_params(state).  DoD:  Testfälle zeigen nachvollziehbare Effekte (viel Shadow → mehr Noise etc.).  Coverage: FR-6  T5.2 – GET /api/profile/psyche implementieren  Description: API-Endpunkt, der:  aktuellen user_state_v1.psyche lädt,  Avatar-Parameter berechnet,  Archetypen-Mix & Deck,  Timeline-Snippets generiert (s. T6.1),  alles als Profil-Payload zurückgibt.  Artifacts:  API-Handler.  DoD:  Sample-Anfrage liefert JSON wie im Beispiel.  Coverage: FR-5, FR-6, FR-7, FR-9  T5.3 – UI: Profil-Ansicht & Avatar im Layout  Description:  Avatar-Komponente (Canvas/SVG) in oberer Bildmitte der relevanten Seiten.  Profilseite mit:  großem Avatar (Hero),  aktueller Archetypen-Mix,  Archetypen-Deck,  Story-Snippets.  Artifacts:  React-Komponenten,  Layout-Updates.  DoD:  In Staging: Profilscreen lädt und reagiert auf veränderten State.  Avatar präsent, nicht überladen.  Coverage: FR-6, FR-9, SC-2  Phase 6 – Story-/Timeline-Layer & Ethik T6.1 – Timeline-Historie & Story-Snippets  Description:  State-Snapshots (z. B. nach jedem größeren Event) speichern,  Heuristiken definieren, wann ein „Kapitel“ erzeugt wird (z. B. Shadow stark über Baseline),  Story-Templates („Die Nebelphase“, „Aufräumen beginnt“).  Artifacts:  timeline_snapshot-Modell,  generate_timeline_snippets(history).  DoD:  Aus einer Test-Historie werden sinnvolle 2–3 Story-Snippets generiert.  Coverage: FR-7, SC-2  T6.2 – Disclaimer & Ethical Copy  Description:  Texte für Disclaimer & Onboarding, die klarstellen: Unterhaltung, nicht Diagnostik.  „Wie kommt das zustande?“-Sektion (kurze Erklärung des Prinzips Signals → State → Avatar).  Artifacts:  Copy-Dokument, implementierte Textbausteine.  DoD:  In UX-Check wird die Botschaft klar verstanden.  Coverage: NFR-3, NFR-5, SC-4  D) Tests & Validierung (Beispiele) TS-1 (Unit) – Aggregationslogik  Input: Serie von marker_scores mit unterschiedlichen reliability_weight.  Erwartung: State bewegt sich langsam; Fun-Tests haben kleinen Effekt.  TS-2 (Unit) – Archetype-Mix  Input: State sehr nah an „Nebel“-Prototyp.  Erwartung: Mist/Nebel bekommt höchste Gewichtung.  TS-3 (Integration) – Test → DUBA → State → Profil  Lauf: Nutzer macht 3 Tests mit „Shadow-lastigen“ Antworten.  Erwartung: shadow.value steigt, Avatar wird dunkler/chaotischer, Archetypen-Mix verschiebt sich.  TS-4 (UX-Test) – Verständnisprofil  Fragen an Testnutzer:innen: „Was zeigt der Avatar? Warum ändert er sich?“  Ziel: ≥ 80 % verstehen den Langzeit-Profilgedanken.  Coverage-Matrix FR→Tasks→Tests ID Typ Kurzbeschreibung Tasks Tests Notizen FR-1 FR Psyche-Pack & user_state_v1 T1.1, T1.2, T3.2 TS-1 Basis FR-2 FR DUBA-Events für Tests T2.1, T2.4, T3.2 TS-3 Signals FR-3 FR Quiz → Marker → quiz_delta T2.2, T2.3, T2.4 TS-3 Plugin-Logik FR-4 FR Aggregation (alpha/baseline/momentum) T3.1, T3.2 TS-1 Stabilität FR-5 FR Archetypen-Mix & Deck T4.1, T4.2, T4.3, T5.2 TS-2, TS-3 Mixture-of-Archetypes FR-6 FR SRR-Avatar T5.1, T5.2, T5.3 TS-3 Visual Twin FR-7 FR Story-/Timeline T6.1, T5.2 TS-3 Kapitel FR-8 FR Quiz-Config mit Psyche-Feldern T2.2 TS-3 (indirekt) Config-first FR-9 FR Profil-API & UI-Flows T5.2, T5.3 TS-3, TS-4 Profilscreen NFR-1 NFR Minimal-invasive Integration T2.4, T5.3 Code-Review Bestehende Flows bleiben NFR-2 NFR Stabilität des States T3.1, T3.2 TS-1 Kein Springen NFR-3 NFR Privacy & Entertainment-only T2.1, T6.2 UX-/Legal-Check Disclaimer NFR-4 NFR Config-first & Maintainability T1.2, T2.2, T4.1 Schema-Tests No Hardcoding NFR-5 NFR Explainability (optional) T6.2 TS-4 „Wie entsteht das?“ SC-1 SC ≥ 3 Tests angebunden T2.2–T2.4, T3.2 TS-3 Pilot-Set SC-2 SC Avatar & Mix ändern sich sichtbar T3.1–T3.2, T4.2–T4.3, T5.1–T5.3 TS-3 Wahrnehmung SC-3 SC Kein Fun-Test kippt Profil T3.1, Parametrisierung TS-1 Weighting SC-4 SC Nutzer verstehen Konzept T5.3, T6.2 TS-4 80%-Ziel Zeitplan (Day 0–7 Ship-Loop) Logisch scheint mir, ein möglicher 7-Tage-Loop:  Day 0  T1.1 Psyche-Pack definieren  T1.2 State-Schema Ziel: Gemeinsames Mentalmodell & Datenbasis.  Day 1–2  T2.1–T2.3 (DUBA-Event, Quiz-Schema, Marker-Aggregation)  T2.4 (API /quiz/complete) Ziel: Tests erzeugen psyche_quiz_completed-Events.  Day 3  T3.1, T3.2 (Aggregation im LME-Core)  Quick-and-dirty UI/Debug-View für State Ziel: Erste End-to-End-Pipeline: Test → State-Update.  Day 4–5  T4.1–T4.3 (Archetypen & Deck)  T5.1 (SRR-Mapping)  Start T5.2 (Profil-API) Ziel: State spiegelt sich bereits als Archetypen-Mix & Avatar-Params.  Day 6  T5.2, T5.3 (Profil-UI & Avatar im Layout)  T6.1 (Timeline-Snippets MVP) Ziel: Erste Profilseite in Staging mit Avatar + Archetypen.  Day 7  T6.2 (Disclaimer & Erklär-Text)  TS-3 & TS-4 (interne UX-Tests, Finetuning)  Soft-Rollout (Feature-Flag). Ziel: MVP „Dynamisches Persönlichkeitsprofil“ shippen.  Risiken & Annahmen Faktisch korrekt sage ich:  Risiko 1 – Verwechslung mit Diagnostik  Annahme: Nutzer:innen lesen / akzeptieren Entertainment-Disclaimer.  Mitigation: sehr klare Sprache, keine medizinischen Begriffe, Reset-Option.  Risiko 2 – Marker-Qualität  Annahme: Content-Team kann sinnvolle Marker setzen.  Mitigation: Guidelines, internes „Marker-Review“, Start mit wenigen sorgfältig designten Tests.  Risiko 3 – State-Sprünge / Frust  Annahme: Parametrisierung (base_alpha_dim, reliability_weight) wird vorsichtig gewählt.  Mitigation: Tests/Simulationen; Fun-Tests immer mit geringem Gewicht.  Risiko 4 – Komplexität der Archetypen  Annahme: Nutzer:innen verstehen Archetypenmix intuitiv.  Mitigation: Wenige, starke Archetypen; klare Copy; Deck als Gamification-Hülle.  Risiko 5 – Technische Integration in bestehende Plattform  Annahme: Quiz-Vertical lässt sich ohne großen Umbau um API-Call / Config erweitern.  Mitigation: strikte Einhaltung von Config-first; neue Logik in separaten Modulen; Feature-Flag für graduellen Rollout.